<%@ page language="java" contentType="text/html; charset=GBK"
    pageEncoding="GBK"%>
<% String path = request.getContextPath();  %>
<!DOCTYPE html>
<html>

<head>
<meta http-equiv="Content-Type" content="text/html" charset="GBK">
<script>
	var CHECK;
	function subForm(){
		var pw=document.getElementById("pw").value;
		var rpw=document.getElementById("rpw").value;
		var email=document.getElementById("em").value;
		var check=document.getElementById("chk").value;	
		if(email.length==0){
			alert("请输入邮箱");
		}else{
			if(check.length==0){
				alert("请输入验证码");
			}else{
				if(CHECK!=check){
					alert("验证码错误！");
				}else{					
					if(pw==rpw){
						//alert("提交表单");
						document.forms[0].submit();
					}else{
						alert("两次密码输入不一致！");
					}					
				}
			}
		}
	}
	function postEmail(){
		while(true){
			CHECK=Math.floor(Math.random()*1000000);
			if(CHECK>99999)
				break;
		}
		var email=document.getElementById("em").value;
		//document.getElementById("show_check").innerHTML=CHECK;
		document.getElementById("email_button").disabled=true;
		var e=encrypt();
		//alert(e);
		window.open("PwResetCheckCL.jsp?Email="+email+"&check="+e);
	}
	function encrypt(){
		//alert(typeof CHECK);
		var enc=CHECK;
		return enc;
	}
</script>
<link type="text/css" rel="stylesheet" href="<%= path %>/CSS/PwReset.css">
<title>注册界面</title>
</head>

<body>
   <canvas ></canvas>
   <form id="resetForm" action="PwResetCL.jsp" method="POST">
   <div id="ResetBox">
      <div>
	     <span id="ResetIDLabel">帐号：</span>
		 <span><input type="email" id="em" name="Email"></span>
		 <span id="email_poster"><input id="email_button" type="button" value="发送验证码" onclick="postEmail()"></span>
      </div>
      <div>
	     <span id="ResetPasswordLabel">密码：</span>
		 <span><input id="pw" type="password" name="Password"></span>
	  </div>
	  <div>
	     <span id="ResetPasswordAgaLabel">重复密码：</span>
		 <span><input id="rpw" type="password" name="RePassword"></span>
	  </div>
	  <div>
	     <span id="ResetVerifyCodeLabel">验证码：</span>
		 <span><input id="chk" type="text" name="Check"></span>
	  </div>
	  <span><a id="ResetBack" href="Login.jsp">返回</a></span>
	  <span><input id="ResetBtn" type="button" value="注册" onclick="subForm()"></span>
	  
   </div>
   </form>
</body>

</html>
